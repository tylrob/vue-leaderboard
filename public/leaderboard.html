<!DOCTYPE html>
<html>
<head>
  <title>Vue Leaderboard</title>
  <script src="js/vue.js"></script>
  <script src="js/axios.js"></script>
  <script src="js/lodash.min.js"></script>
  <link rel="stylesheet" type="text/css" href="css/reset.css">
  <style>
    .flip-list-move {
      transition: transform 0.5s;
    }
    .container {
      border-style: solid;
      border-width: 1px;
      padding: 0.25rem;
      margin-bottom: 0.5rem;
      background-color: #d3d3d3;
    }
    .score {
      background-color: black;
      color: white;
      padding: 0.5rem;
      display: inline-block;
      vertical-align: middle;
      text-align: center;
      min-width: 20px;
    }
    .athlete-detail {
      padding: 0.5rem;
      display:inline-block;
      vertical-align: middle;
    }
    .title {
      margin-top: 1rem;
    }
    h3 {
      font-size: 1.5rem;
    }
    body {
      padding: 1rem;
    }
  </style>
</head>
<body>
  <div id="app">
    <button v-on:click="randomRanks">Random ranks and sort</button>
    <div class="container title">
      <h3>Vue Event 2017</h3>
    </div>
    <transition-group name="flip-list" tag="div">
      <div class="container" v-for="athlete in athletes" v-bind:key="athlete.id">
        <div class="score">{{ athlete.score }}</div>
        <div class="athlete-detail">
          <div><h3>{{ athlete.name }}</h3></div>
          <div>{{ athlete.gym }}</div>
        </div>
      </div>
    </transition-group>
  </div>

  <script>
    var vm = new Vue({
      el: '#app',
      data: {
        message: 'Hello Vue Leaderboard!',
        orderBy: 'desc',
        athletes: [
          {
            id: 'id1',
            name: 'Aaron',
            gym: 'CrossFit Greensboro',
            score: 0
          },
          {
            id: 'id2',
            name: 'Beth',
            gym: 'CrossFit 919',
            score: 0
          },
          {
            id: 'id3',
            name: 'Carl',
            gym: 'CrossFit Chapel Hill',
            score: 0
          },
          {
            id: 'id4',
            name: 'Diane',
            gym: 'CrossFit RTP',
            score: 0
          }
        ]
      },
      methods: {
        randomRanks: function(){
          _.each(this.athletes, function(athlete){
            athlete.score = _.random(0,10);
          });
          this.athletes = _.orderBy(this.athletes, ['score', 'name'],
            ['desc', 'asc']);
        }
      }
    });
  </script>

</body>
</html>